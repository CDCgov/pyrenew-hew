# nowcastNHSN

R package for generating reporting triangles from versioned epidemiological data and running nowcasts using [`baselinenowcast`](https://github.com/epinowcast/baselinenowcast).

## Installation

This package uses `renv` for dependency management and `pak` for installing GitHub packages.

```r
# Install renv if needed
install.packages("renv")

# Initialize and restore dependencies
renv::restore()

# Install the local package
pak::local_install(".", upgrade = FALSE)
```

## Quick Start

```r
library(nowcastNHSN)

# Fetch versioned COVID-19 hospital admissions data
versioned_data <- fetch_versioned_covidcast(
  source = "hhs",
  signal = "confirmed_admissions_covid_1d",
  geo_type = "state",
  geo_values = "ca",
  reference_dates = seq(as.Date("2024-01-01"), as.Date("2024-01-31"), by = "day"),
  as_of_dates = seq(as.Date("2024-01-01"), as.Date("2024-02-15"), by = "day")
)

# Build reporting triangle
triangle <- build_reporting_triangle(versioned_data)

# Run baseline nowcast
# (baselinenowcast workflow to be added)
```

## Package Structure

- `R/` - Function implementations
  - `fetch_versioned_covidcast.R` - Fetch data with multiple as_of dates
  - `build_reporting_triangle.R` - Transform to reporting triangle format
- `tests/testthat/` - Unit tests
- `man/` - Documentation (generated by roxygen2)

## Development

This package follows the standard R package development workflow:

```r
# Load package for development
devtools::load_all()

# Run tests
devtools::test()

# Generate documentation
devtools::document()

# Check package
devtools::check()
```
